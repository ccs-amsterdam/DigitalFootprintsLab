(this.webpackJsonpDigitalFootprintsLab=this.webpackJsonpDigitalFootprintsLab||[]).push([[0],{255:function(e,t,n){},281:function(e,t,n){"use strict";n.r(t);n(241);var a=n(1),r=n.n(a),c=n(61),i=n.n(c),s=n(111),o=n(25),u=n(315),l=n(322),d=n(3),h=Object(o.i)((function(e){var t=e.items,n=e.children,a=Object(o.h)(),r=t.map((function(e,t){return Object(d.jsx)(u.a.Item,{index:t,as:s.b,to:e.path,header:0===t,disabled:!1,active:e.path===a.pathname,children:e.label},"item-"+t)}));return Object(d.jsxs)(l.a.Pushable,{children:[Object(d.jsx)(l.a,{as:u.a,inverted:!0,animation:"push",visible:!1,direction:"top",size:"mini",children:r}),Object(d.jsx)(l.a.Pusher,{children:n})]})})),b=(n(255),n(11)),j=n.n(b),f=n(18),p=n(2),m=n(7),g=n(10),O=n(14);var x=function(){var e=Object(f.a)(j.a.mark((function e(t){var n,a,r,c,i,s,o,u,l,d,h;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},0!==(a=t.filter((function(e){return!n[e]||!n[e].retry}))).length){e.next=4;break}return e.abrupt("return",n);case 4:r=Object(p.a)(a);try{for(r.s();!(c=r.n()).done;)i=c.value,n[i]={}}catch(b){r.e(b)}finally{r.f()}return e.next=8,v(a);case 8:for(s=e.sent,C.addGroupInfo(s),o=0,u=Object.entries(s);o<u.length;o++)l=Object(O.a)(u[o],2),d=l[0],h=l[1],n[d]=h;return console.log(n),e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(f.a)(j.a.mark((function e(t){var n,a,r,c,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("1234",t);case 3:return n=e.sent,a={token:n,urls:t},e.next=7,fetch("https://dd.amcat.nl",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 7:return r=e.sent,e.next=10,r.json();case 10:return c=e.sent,e.abrupt("return",c);case 14:return e.prev=14,e.t0=e.catch(0),i=t.reduce((function(e,t){return e[t]={retry:!0},e}),{}),e.abrupt("return",i);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(f.a)(j.a.mark((function e(t,n){var a,r,c,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[t].concat(n).join("|"),r=(new TextEncoder).encode(a),e.next=4,crypto.subtle.digest("SHA-256",r);case 4:return c=e.sent,i=Array.from(new Uint8Array(c)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=n(164),k=n(257),S=n(275),C=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(m.a)(this,e),this.idb=t?new w.a("FootprintDB",{indexedDB:k,IDBKeyRange:S}):new w.a("FootprintDB"),this.idb.version(2).stores({meta:"welcome",dataStatus:"&name, source, status, date",data:"&name, deleted",groupInfo:"&group"})}return Object(g.a)(e,[{key:"destroyEverything",value:function(){var e=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.idb.delete();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"welcome",value:function(){var e=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isWelcome();case 2:if(e.sent){e.next=4;break}this.idb.meta.add({welcome:1});case 4:return e.abrupt("return",null);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isWelcome",value:function(){var e=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.idb.meta.get(1));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getData",value:function(){var e=Object(f.a)(j.a.mark((function e(t,n){var a,r,c,i,s,o,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.idb.data.get({name:t});case 3:if(!(null===(a=e.sent)||void 0===a?void 0:a.deleted)){e.next=8;break}return a.data=a.data.filter((function(e,t){return!a.deleted[t]})),e.next=8,this.idb.data.put({name:t,deleted:null,data:a.data},[t]);case 8:if(n)for(r=0;r<a.data.length;r++){c={},i=Object(p.a)(n);try{for(i.s();!(s=i.n()).done;)o=s.value,c[o]=a.data[r][o]}catch(l){i.e(l)}finally{i.f()}a.data[r]=c}for(u=0;u<a.data.length;u++)a.data[u]._INDEX=u;return e.abrupt("return",a.data);case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setDeleted",value:function(){var e=Object(f.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.idb.data.where("name").equals(t).modify({deleted:n});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addData",value:function(){var e=Object(f.a)(j.a.mark((function e(t,n,a){var r,c,i,s,o,u,l,d,h,b,f,m=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.length>3&&void 0!==m[3]?m[3]:null,e.next=3,this.getData(n);case 3:if(c=e.sent,i={},!(c&&c.data.length>0)){e.next=26;break}if(s={},r){o=Object(p.a)(t);try{for(l=function(){var e=u.value;e.group&&!i[e.group]&&(i[e.group]=!0);var t=JSON.stringify(r.map((function(t){return e[t]})));s[t]=!0},o.s();!(u=o.n()).done;)l()}catch(j){o.e(j)}finally{o.f()}}d=Object(p.a)(c.data),e.prev=9,b=function(){var e=h.value;if(e.group&&i[e.group]&&(i[e.group]=!1),r){var n=JSON.stringify(r.map((function(t){return e[t]})));if(s[n])return"continue"}t.push(e)},d.s();case 12:if((h=d.n()).done){e.next=18;break}if("continue"!==b()){e.next=16;break}return e.abrupt("continue",16);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),d.e(e.t0);case 23:return e.prev=23,d.f(),e.finish(23);case 26:return e.next=28,this.idb.data.put({name:n,deleted:null,data:t},[n]);case 28:return e.next=30,this.updateDataStatus(n,a);case 30:(f=Object.keys(i).filter((function(e){return i[e]}))).length>0&&x(f);case 32:case"end":return e.stop()}}),e,this,[[9,20,23,26]])})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"getDataStatus",value:function(){var e=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.idb.datastatus.get({name:t}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateDataStatus",value:function(){var e=Object(f.a)(j.a.mark((function e(t,n){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.idb.dataStatus.get({name:t});case 2:a=e.sent,r=new Date,a?this.idb.dataStatus.where("name").equals(t).modify({date:r,source:n,status:"finished"}):this.idb.dataStatus.add({name:t,date:r,source:n,status:"finished"});case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getGroupInfo",value:function(){var e=Object(f.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.idb.groupInfo.where("group").anyOf(t).toArray();case 2:return n=e.sent,e.abrupt("return",n.reduce((function(e,t){return e[t.url]=t.info,e}),{}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addGroupInfo",value:function(){var e=Object(f.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object.keys(t).map((function(e){return{group:e,info:t[e]}})),this.idb.groupInfo.bulkPut(n).then().catch(w.a.BulkError,(function(e){console.log("ignored some duplicates in writeGroupInfo")}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),D=n(323),T=n(324),I=n(325),z=n(195),A=n.p+"static/media/background.eb5e36bf.jpeg",G=function(e){var t=e.items,n=Object(o.g)(),r=function(){var e=Object(f.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}return e.next=3,C.isWelcome();case 3:if(e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.prev=6,e.next=9,C.welcome();case 9:n.push(t[0].path),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(6);case 14:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){r(!0)})),Object(d.jsx)(D.a,{inverted:!0,textAlign:"center",style:{height:"100vh",backgroundImage:"url(".concat(A,")"),backgroundSize:"100% 100%"},verticalAlign:"middle",children:Object(d.jsx)(D.a.Column,{style:{maxWidth:600},children:Object(d.jsxs)(T.a,{style:{border:0},children:[Object(d.jsx)(I.a,{as:"h2",children:"Welcome to the Digital Footprints Lab!"}),Object(d.jsx)("p",{align:"justified",children:"This application let's you collect and explore your own digital traces. All the data is stored and processed on your own device, and cannot be seen by anyone, so that you are free to contemplate your life choices in solitude."}),Object(d.jsx)("p",{align:"justified",children:"We do, however, kindly ask you to anonymously donate some parts of this data for scientific research. Specifically, we are interested in how you seek, consume and share news articles. The data will be used for non-commercial research by a select group of researchers at Dutch Universities."}),Object(d.jsx)(z.a,{primary:!0,onClick:function(){return r(!1)},children:"Great, let's get started!"})]})})})},_=n(30),E=n(102),M=["Component"],B=function(e){var t=e.Component,n=Object(E.a)(e,M),r=Object(a.useState)(!0),c=Object(O.a)(r,2),i=c[0],s=c[1],u=Object(a.useState)(!1),l=Object(O.a)(u,2),h=l[0],b=l[1];return function(){var e=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.isWelcome();case 2:if(!e.sent){e.next=6;break}b(!0),e.next=7;break;case 6:b(!1);case 7:s(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),Object(d.jsx)(o.b,Object(_.a)(Object(_.a)({},n),{},{render:function(e){return i?Object(d.jsx)("div",{children:"loading..."}):h?Object(d.jsx)(t,Object(_.a)(Object(_.a)({},n),e)):Object(d.jsx)(o.a,{to:"/"})}}))},H=n(64),q=n(321),N=n(314),Y=n.p+"static/media/logo.fc0d5b24.png",L=n(318),W=n(326),U=n(310),F=function(e){var t=e.children,n=e.name,a=e.subname,r=e.icon,c=e.onClick,i=e.loading,s=e.done;return Object(d.jsxs)(q.a,{centered:!0,style:{cursor:"pointer",width:"100%",marginLeft:"2em",marginRight:"2em",background:"#ffffff00",position:"relative"},onClick:c,children:[Object(d.jsx)(W.a,{active:"loading"===i,children:Object(d.jsx)(U.a,{})}),s?Object(d.jsx)(H.a,{size:"massive",name:"checkmark",style:{position:"absolute",color:"#57b92d8c",top:"20%",left:"60%"}}):null,Object(d.jsxs)(q.a.Content,{style:{background:"#ffffff"},children:[Object(d.jsx)(H.a,{size:"huge",name:r,style:{float:"left"}}),Object(d.jsx)(q.a.Header,{content:n.replace("_"," ")}),Object(d.jsx)(q.a.Meta,{content:a}),Object(d.jsx)(q.a.Description,{children:t})]})]})},R=n(56),V=function(e,t){var n=e.name.replace("_"," ");return"failed"===e.status?Object(d.jsxs)(L.a.Item,{children:[Object(d.jsx)(L.a.Icon,{name:"close",color:"red"}),Object(d.jsxs)(L.a.Content,{children:["Failed to get ",Object(d.jsx)("b",{children:n})]})]},t):"finished"===e.status?Object(d.jsxs)(L.a.Item,{children:[Object(d.jsx)(L.a.Icon,{name:"check circle outline",color:"green"}),Object(d.jsxs)(L.a.Content,{children:["Gathered ",Object(d.jsx)("b",{children:n})]})]},t):Object(d.jsxs)(L.a.Item,{children:[Object(d.jsx)(L.a.Icon,{name:"circle outline"}),Object(d.jsxs)(L.a.Content,{children:["Click to gather ",Object(d.jsx)("b",{children:n})]})]},t)},J=function(e){var t=e.source,n=e.subname,a=e.produces,r=e.icon,c=e.onClick,i=e.loading,s=Object(R.c)((function(e){return e.dataStatus.filter((function(e){return e.source===t}))})),o=!0,u=a.map((function(e){var t=s.find((function(t){return t.name===e}));return t||(o=!1),t||{name:e,status:"empty"}}));return Object(d.jsx)(F,{name:t,subname:n,icon:r,onClick:c,loading:i,done:o,children:Object(d.jsx)(L.a,{style:{textAlign:"left"},children:u.map(V)})})},P=n(319),$=n(311),X=n.p+"static/media/googleTakeout1.d43cb755.gif",K=n.p+"static/media/googleTakeout2.97152dfa.gif",Q=["and","or","not","the","it"].reduce((function(e,t){return e[t]=!0,e}),{}),Z=function(e){return e.split(/\W+/).filter((function(e){return!((e=e.toLowerCase()).length<=1)&&!Q[e]}))},ee=n(216),te=n.n(ee),ne=n(5),ae=function(e){return{type:"SET_DATA_STATUS",dataStatus:e}},re=function(e,t,n){var a="finished"===n?new Date:null;return function(r,c){var i=c().dataStatus,s=Object(ne.a)(i),o=s.findIndex((function(n){return n.name===e&&n.source===t}));o<0?s.push({name:e,source:t,date:a,status:n}):(s[o]=Object(_.a)(Object(_.a)({},s[o]),{},{status:n}),a&&(s[o].date=a)),r(ae(s))}},ce=function(e){var t=e.setOpen,n=e.setLoading,r=Object(R.b)(),c=Object(a.useRef)(),i=function(){var e=Object(f.a)(j.a.mark((function e(a){var c,i,s,o,u,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(re("Browsing","Google_Takeout","loading")),r(re("Search","Google_Takeout","loading")),r(re("Youtube","Google_Takeout","loading")),c=!1,e.prev=4,n("loading"),t(!1),i=new te.a,s=a.target.files[0],e.next=11,i.loadAsync(s);case 11:return o=e.sent,e.prev=12,e.next=15,o.file("Takeout/Chrome/BrowserHistory.json").async("text");case 15:return u=e.sent,u=JSON.parse(u),e.next=19,se(u["Browser History"]);case 19:r(re("Browsing","Google_Takeout","finished")),r(re("Search","Google_Takeout","finished")),e.next=30;break;case 23:e.prev=23,e.t0=e.catch(12),c=!0,console.log("chrome error"),console.log(e.t0),r(re("Browsing","Google_Takeout","failed")),r(re("Search","Google_Takeout","failed"));case 30:if(e.prev=30,!o.file("Takeout/YouTube and YouTube Music/history/watch-history.json")){e.next=39;break}return e.next=35,o.file("Takeout/YouTube and YouTube Music/history/watch-history.json").async("text");case 35:l=e.sent,l=JSON.parse(l),e.next=43;break;case 39:return e.next=41,o.file("Takeout/YouTube and YouTube Music/history/watch-history.html").async("text");case 41:l=e.sent,l=ie(l);case 43:return e.next=45,oe(l);case 45:r(re("Youtube","Google_Takeout","finished")),e.next=53;break;case 48:e.prev=48,e.t1=e.catch(30),console.log(e.t1),c=!0,r(re("Youtube","Google_Takeout","failed"));case 53:e.next=58;break;case 55:e.prev=55,e.t2=e.catch(4),n("failed");case 58:n(c?"failed":"finished");case 59:case"end":return e.stop()}}),e,null,[[4,55],[12,23],[30,48]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{style:{textAlign:"center"},children:[Object(d.jsx)(z.a,{primary:!0,onClick:function(){return c.current.click()},children:"Import Google_Takeout"}),Object(d.jsx)("input",{ref:c,type:"file",name:"file",hidden:!0,onChange:i,accept:"application/zip"})]})},ie=function(e){for(var t=(new DOMParser).parseFromString(e,"text/html").querySelector(".mdl-grid").querySelectorAll(".mdl-grid"),n=[],a=0;a<t.length;a++){var r=t[a],c=r.querySelectorAll("a"),i={};2===c.length&&(i.subtitles={name:c[1].textContent,url:c[1].attributes.href.textContent}),i.titleUrl=c[0].attributes.href.textContent,i.title=c[0].textContent;var s=r.children[1].querySelectorAll("br"),o=s[s.length-1].nextSibling.textContent,u=new Date(Date.parse(o.replace("CEST","GMT+0200")));i.time=u.toISOString(),n.push(i)}return n},se=function(){var e=Object(f.a)(j.a.mark((function e(t){var n,a,r,c,i,s,o,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=[],c=Object(p.a)(t),e.prev=3,c.s();case 5:if((i=c.n()).done){e.next=23;break}s=i.value,e.prev=7,r=new URL(s.url),e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(7),console.log("could not parse url"),e.abrupt("continue",21);case 15:if(r.hostname+r.pathname!=="www.google.com/search"){e.next=20;break}return o=s.title.replace("- Google Search","").trim(),u=Z(o),a.push({query:o,word:u,date:ue(s.time_usec),browser:"Chrome"}),e.abrupt("continue",21);case 20:n.push({url:s.url,title:s.title,domain:r.hostname,browser:"Chrome",date:ue(s.time_usec),page_transition:s.page_transition});case 21:e.next=5;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(3),c.e(e.t1);case 28:return e.prev=28,c.f(),e.finish(28);case 31:return e.next=33,C.addData(a,"Search","Google_Takeout",["url","date"]);case 33:return e.next=35,C.addData(n,"Browsing","Google_Takeout",["query","date"]);case 35:case"end":return e.stop()}}),e,null,[[3,25,28,31],[7,11]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(f.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return{url:e.titleUrl,title:e.title,date:new Date(e.time),channel:e.subtitles?e.subtitles.name:"channel removed",channel_url:e.subtitles?e.subtitles.url:"channel removed"}})),console.log(n),e.next=4,C.addData(n,"Youtube","Google_Takeout",["url","date"]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(e){return new Date(Math.round(e/1e3))},le=function(e){var t=e.children,n=e.setLoading,r=Object(a.useState)(!1),c=Object(O.a)(r,2),i=c[0],s=c[1];return Object(d.jsxs)(P.a,{onClose:function(){return s(!1)},onOpen:function(){return s(!0)},open:i,trigger:t,children:[Object(d.jsx)(P.a.Header,{children:"Google Takeout"}),Object(d.jsx)(P.a.Content,{children:Object(d.jsxs)(P.a.Description,{children:[Object(d.jsxs)("p",{children:["As you can imagine, Google has a lot of data about many people, and probably about you as well. A lesser known fact is that the data is still yours, and Google is legally required to give you access to it. You can obtain this data via"," ",Object(d.jsx)("a",{href:"https://takeout.google.com/",target:"_blank",rel:"noopener noreferrer",children:"Google Takeout."})," "]}),Object(d.jsx)("br",{}),Object(d.jsx)(D.a,{stackable:!0,children:Object(d.jsx)(D.a.Column,{width:16,children:Object(d.jsxs)($.a,{children:[Object(d.jsx)(I.a,{children:"How do I order takeout from Google?"}),Object(d.jsxs)(L.a,{ordered:!0,children:[Object(d.jsxs)(L.a.Item,{children:["First, open the"," ",Object(d.jsx)("a",{href:"https://takeout.google.com/",target:"_blank",rel:"noopener noreferrer",children:"Google Takeout"})," ","website (the link opens in a new tab or window)."]}),Object(d.jsxs)(L.a.Item,{children:["Find the list under ",Object(d.jsx)("b",{children:"Create a new export"}),". Unselect everything, and then only select ",Object(d.jsx)("b",{children:"Chrome"})," and ",Object(d.jsx)("b",{children:"Youtube"})]}),Object(d.jsxs)(L.a.Item,{children:["For Youtube we also filter out some content. Click on"," ",Object(d.jsx)("b",{children:"All Youtube data included"}),", and make sure to select only ",Object(d.jsx)("b",{children:"History"}),". Then click on ",Object(d.jsx)("b",{children:"Multiple formats"})," and for ",Object(d.jsx)("b",{children:"History"})," change ",Object(d.jsx)("b",{children:"HTML"})," ","to ",Object(d.jsx)("b",{children:"JSON"})]}),Object(d.jsxs)(D.a,{stackable:!0,style:{marginTop:"1em",marginBottom:"1em"},children:[Object(d.jsxs)(D.a.Column,{width:8,children:[Object(d.jsx)(I.a,{textAlign:"center",children:"Step 2"}),Object(d.jsx)(T.a,{style:{padding:0},children:Object(d.jsx)("img",{width:"100%",src:X,alt:"loading..."})})]}),Object(d.jsxs)(D.a.Column,{width:8,children:[Object(d.jsx)(I.a,{textAlign:"center",children:"Step 3"}),Object(d.jsx)(T.a,{style:{padding:0},children:Object(d.jsx)("img",{width:"100%",src:K,alt:"loading..."})})]})]}),Object(d.jsxs)(L.a.Item,{children:["Finally, click ",Object(d.jsx)("b",{children:"Next step"}),". Here you can click ",Object(d.jsx)("b",{children:"Create export"})," (the default settings are good). If you followed the selection steps, this will only be a few megabytes, and Google will send you the download link in a few minutes. This link will give you a ",Object(d.jsx)("b",{children:"zip"})," file, that you can upload here:"]})]}),Object(d.jsx)("br",{}),Object(d.jsx)(ce,{setOpen:s,setLoading:n})]})})})]})}),Object(d.jsx)(P.a.Actions,{children:Object(d.jsx)(z.a,{onClick:function(){return s(!1)},children:"Cancel"})})]})},de=function(){var e=Object(a.useState)("idle"),t=Object(O.a)(e,2),n=t[0],r=t[1];return Object(d.jsx)(le,{setLoading:r,children:Object(d.jsx)(J,{source:"Google_Takeout",subname:"takeout.google.com",produces:["Browsing","Search","Youtube"],icon:"google",loading:n})})},he=function(){return Object(d.jsx)(de,{})},be=function(e){var t=e.date;if(!t)return"Data not yet gathered";var n=t.toISOString(),a=(new Date).toISOString(),r=n.slice(0,10)===a.slice(0,10)?"today":"on ".concat(n.slice(0,10));return Object(d.jsx)(L.a.Item,{children:Object(d.jsxs)(L.a.Content,{children:["Gathered ",r," from ",Object(d.jsx)("b",{children:e.source.replace("_"," ")})]})},e.source)},je=function(e){var t=e.name,n=e.subname,a=e.icon,r=Object(o.g)(),c=Object(R.c)((function(e){return e.dataStatus.filter((function(e){return e.name===t&&"finished"===e.status}))}));if(!c||0===c.length)return null;console.log(c);return Object(d.jsx)(F,{name:t,subname:n,icon:a,onClick:function(){r.push(t)},children:Object(d.jsx)(L.a,{children:c.map(be)})})},fe=function(){return Object(d.jsx)(je,{name:"Browsing",subname:"What pages did you visit?",icon:"history"})},pe=function(){return Object(d.jsx)(je,{name:"Search",subname:"What did you search for?",icon:"search"})},me=function(){return Object(d.jsx)(je,{name:"Youtube",subname:"Channels and videos",icon:"youtube"})},ge=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(fe,{}),Object(d.jsx)(pe,{}),Object(d.jsx)(me,{})]})},Oe={color:"white",fontSize:"20px",filter:"none",background:"#00000078",paddingBottom:"0.3em",paddingTop:"0.4em"},xe={marginBottom:"1em"},ve={marginTop:"2em"},ye=function(){var e=Object(d.jsxs)(z.a,{style:{float:"right",background:"#00000000",margin:"10px",color:"white",border:"1px solid white"},children:[Object(d.jsx)(H.a,{name:"trash"}),"Delete all data"]});return Object(d.jsxs)(N.a,{on:"click",trigger:e,children:[Object(d.jsx)(N.a.Header,{children:"Delete data from browser"}),Object(d.jsxs)(N.a.Content,{children:[Object(d.jsx)("p",{children:"Do you want to delete all the gathered data from the browser?"}),Object(d.jsx)("p",{children:"Note that any data you downloaded will still be on your computer, so you might want to delete that as well."})]}),Object(d.jsx)("br",{}),Object(d.jsx)(z.a,{negative:!0,fluid:!0,onClick:function(){return C.destroyEverything().then((function(){window.location.reload("/")}))},children:"Delete data"})]})},we=function(){var e=Object(R.b)();return Object(a.useEffect)((function(){C.idb.dataStatus.toArray().then((function(t){return e(ae(t))})).catch((function(e){return console.log(e)}))}),[e]),Object(d.jsx)("div",{style:{height:"100vh",backgroundImage:"url(".concat(Y,")"),backgroundSize:"100% 100%"},children:Object(d.jsxs)(D.a,{stackable:!0,divided:!0,centered:!0,children:[Object(d.jsx)(D.a.Row,{style:{height:"60px"},children:Object(d.jsx)(D.a.Column,{children:Object(d.jsx)(ye,{})})}),Object(d.jsxs)(D.a.Row,{children:[Object(d.jsxs)(D.a.Column,{textAlign:"center",width:5,style:xe,children:[Object(d.jsxs)(I.a,{style:Oe,children:[Object(d.jsx)(H.a,{name:"cloud download"}),"Gather"]}),Object(d.jsx)(q.a.Group,{style:ve,children:Object(d.jsx)(he,{})})]}),Object(d.jsxs)(D.a.Column,{textAlign:"center",width:5,style:xe,children:[Object(d.jsxs)(I.a,{style:Oe,children:[Object(d.jsx)(H.a,{name:"search"}),"Explore"]}),Object(d.jsx)(q.a.Group,{style:ve,children:Object(d.jsx)(ge,{})})]}),Object(d.jsx)(D.a.Column,{textAlign:"center",width:5,style:xe,children:Object(d.jsxs)(I.a,{style:Oe,children:[Object(d.jsx)(H.a,{name:"student"}),"Donate"]})})]})]})})},ke=n(317),Se=function(e){var t=e.children,n=e.background,a=e.color;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{style:{zIndex:1,top:0,bottom:0,right:0,left:0,background:a,position:"absolute"}}),Object(d.jsx)(D.a,{style:{height:"100vh",overflow:"auto",backgroundSize:"100% 100%",backgroundImage:"url(".concat(n,")")},children:Object(d.jsx)("div",{style:{zIndex:2},children:t})})]})},Ce=n(312),De=n(320),Te=n(214),Ie=n(328),ze=function(e){var t=e.dashData,n=e.deleteIds,r=e.setDeleteIds,c=Object(a.useState)(!0),i=Object(O.a)(c,2),s=i[0],o=i[1],u=function(){var e=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.rmID(n);case 2:r([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=(null===n||void 0===n?void 0:n.length)||0;return s||1!==l||u(),Object(d.jsxs)(P.a,{style:{backgroundColor:"#00000054"},open:l>0,onClose:function(){return r([])},children:[Object(d.jsxs)(P.a.Header,{children:["Delete item",1===l?"":"s"]}),Object(d.jsxs)(P.a.Content,{children:[Object(d.jsxs)("p",{children:["Are you sure you want to delete ",1===l?"this item":"".concat(l," items"),"?"]}),Object(d.jsx)("br",{}),Object(d.jsxs)(P.a.Actions,{children:[Object(d.jsxs)(Te.a,{centered:"true",children:[Object(d.jsx)(z.a,{fluid:!0,primary:!0,onClick:function(){return r([])},children:"Cancel"}),Object(d.jsx)(z.a,{fluid:!0,color:"red",onClick:function(e,t){return u()},children:"Yes"})]}),l>1?null:Object(d.jsx)(Ie.a,{style:{float:"right"},onChange:function(e,t){return o(!t.value)},label:"Do not ask again. Next time, delete immediately when clicking the trash icon"})]})]})]})},Ae=r.a.memo(ze),Ge=function(e){var t=e.dashData,n=e.columns,r=e.selection,c=Object(a.useState)(0),i=Object(O.a)(c,2),s=i[0],o=i[1],u=Object(a.useState)([]),l=Object(O.a)(u,2),h=l[0],b=l[1],p=Object(a.useState)(0),m=Object(O.a)(p,2),g=m[0],x=m[1],v=Object(a.useState)([]),y=Object(O.a)(v,2),w=y[0],k=y[1];Object(a.useEffect)((function(){if(!t)return b([]),null;x(t.N(r)),b(t.listData(25,r)),o(t.N())}),[t,r]);var S=function(){var e=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(t.listData(h.length+25,r));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)($.a,{style:{height:"98%",width:"98%",padding:"0"},children:[Object(d.jsx)(T.a,{style:{background:"#00000000",height:"50px",margin:"0"},children:Object(d.jsxs)(I.a,{textAlign:"center",as:"h2",style:{color:"white"},children:[g===s?null:Object(d.jsx)(z.a,{onClick:function(){return k(r)},icon:"trash alternate",style:{color:"#b23434bd",padding:"0",background:"#ffffff00"}}),g===s?s:"".concat(g," / ").concat(s)," items"]})}),Object(d.jsx)($.a,{style:{height:"calc(100% - 50px)",width:"100%",overflow:"auto",paddingLeft:"20px"},children:Object(d.jsx)(Ce.a,{continuous:!0,onBottomVisible:S,children:Object(d.jsx)(_e,{dashData:t,data:h,columns:n})})}),Object(d.jsx)(Ae,{dashData:t,deleteIds:w,setDeleteIds:k})]})},_e=function(e){var t=e.dashData,n=e.data,r=e.columns,c=Object(a.useState)([]),i=Object(O.a)(c,2),s=i[0],o=i[1];return null!==n&&0!==n.length&&r?Object(d.jsxs)(De.a,{unstackable:!0,fixed:!0,singleLine:!0,style:{width:"100%",color:"white",background:"#00000099"},children:[function(){var e=[{name:"delete",width:1}].concat(Object(ne.a)(r)).map((function(e){var t="object"===typeof e?e.name:e;return Object(d.jsx)(De.a.HeaderCell,{width:null===e||void 0===e?void 0:e.width,style:{top:"0px",position:"sticky",zIndex:"2"},children:t},e)}));return Object(d.jsx)(De.a.Header,{children:Object(d.jsx)(De.a.Row,{children:e})})}(),function(){var e=n.map((function(e,t){var n=r.map((function(n){var a="object"===typeof n?n.name:n,r=(null===n||void 0===n?void 0:n.f)||null,c=Ee(e,a,r);return Object(d.jsx)(De.a.Cell,{title:c,children:c},a+"_"+t)}));return Object(d.jsxs)(De.a.Row,{children:[Object(d.jsx)(De.a.Cell,{children:Object(d.jsx)(z.a,{style:{padding:"5px",background:"red",color:"black"},onClick:function(){return o([e._INDEX])},icon:"trash alternate"})},"0"),n]},t)}));return Object(d.jsx)(De.a.Body,{children:e})}(),Object(d.jsx)(Ae,{dashData:t,deleteIds:s,setDeleteIds:o})]}):null},Ee=function(e,t,n){var a;return n?a=n(e):(a=e[t])instanceof Date&&(a=a.toISOString().slice(0,19).replace(/T/g," ")),a},Me=r.a.memo(Ge),Be=n(313),He=function(e){var t=e.dashData,n=e.searchOn,r=e.setSelection,c=Object(a.useState)(""),i=Object(O.a)(c,2),s=i[0],o=i[1],u=Object(a.useState)(!1),l=Object(O.a)(u,2),h=l[0],b=l[1];return Object(a.useEffect)((function(){b(!0);var e=setTimeout((function(){r(t&&s?t.search(s,n):null),b(!1)}),500);return function(){return clearTimeout(e)}}),[t,s,n,b,r]),Object(d.jsxs)("div",{style:{display:"flex",margin:"0"},children:[Object(d.jsx)("div",{class:"dimmable",style:{width:"50px"},children:Object(d.jsx)(H.a,{size:"big",name:h?"compass":"search",loading:h,style:{paddingTop:"9px",paddingLeft:"13fpx",color:"white"}})}),Object(d.jsx)("div",{style:{flex:"1 1 auto"},children:Object(d.jsx)(Be.a,{fluid:!0,value:s,icon:Object(d.jsx)(z.a,{compact:!0,icon:"window close",onClick:function(){return o("")},size:"huge",style:{color:"white",height:"1em",background:"#ffffff00"}}),onChange:function(e,t){return o(t.value)}})})]})},qe=r.a.memo(He),Ne=function(e,t){for(var n=0;n<e.length;n++)if(e[n].length<=t[n])return!0;return!1},Ye=function(e,t){for(var n=1;n<e.length;n++)if(e[n][t[n]]!==e[0][t[0]])return!1;console.log("-------------");for(var a=0;a<e.length;a++)console.log(e[a][t[a]]);return!0},Le=function(e,t){for(var n=e[0][t[0]],a=1;a<e.length;a++)e[a][t[a]]>n&&(n=e[a][t[a]]);return n},We=function(e){if(0===(e=e.filter((function(e){return null!==e}))).length)return null;if(1===e.length)return e[0];for(var t=new Array(e.length).fill(0),n=[];!Ne(e,t);){if(Ye(e,t)){console.log(t[0]),n.push(e[0][t[0]]);for(var a=0;a<t.length;a++)t[a]++}for(var r=Le(e,t),c=0;c<t.length;c++)e[c][t[c]]<r&&t[c]++}return n},Ue=function(){function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(m.a)(this,e),this.name=t,this.data=n,this.setData=a,this.deleted=r||new Array(n.length).fill(!1)}return Object(g.a)(e,[{key:"triggerUpdate",value:function(){this.setData(new e(this.name,this.data,this.setData,this.deleted))}},{key:"rmID",value:function(){var e=Object(f.a)(j.a.mark((function e(t){var n,a,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(ne.a)(this.deleted),console.log(t),a=Object(p.a)(t);try{for(a.s();!(r=a.n()).done;)c=r.value,n[c]=!0}catch(i){a.e(i)}finally{a.f()}return e.prev=4,e.next=7,C.setDeleted(this.name,n);case 7:this.deleted=n,this.triggerUpdate(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log("could not delete data");case 14:case"end":return e.stop()}}),e,this,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e||0===e.length)return null;var n,a=[],r=Array.isArray(e)?e:[e],c=[],i=Object(p.a)(r);try{for(i.s();!(n=i.n()).done;){var s=n.value;c.push(new RegExp(s.replace(/[-/\\^$*+?.()|[\]{}]/,"\\$&"),"i"))}}catch(m){i.e(m)}finally{i.f()}for(var o=0;o<this.data.length;o++)if(!this.deleted[o]){var u,l=t||Object.keys(this.data[o]),d=Object(p.a)(l);try{e:for(d.s();!(u=d.n()).done;){var h,b=u.value,j=Object(p.a)(c);try{for(j.s();!(h=j.n()).done;){var f=h.value;if(f.test(this.data[o][b])){a.push(o);break e}}}catch(m){j.e(m)}finally{j.f()}}}catch(m){d.e(m)}finally{d.f()}}return a}},{key:"searchValues",value:function(e,t){if(null===e||0===e.length)return null;for(var n=e.reduce((function(e,t){return e[t]=!0,e}),{}),a=[],r=0;r<this.data.length;r++)if(!this.data[r]._DELETED)if(Array.isArray(this.data[r][t])){var c,i=Object(p.a)(this.data[r][t]);try{for(i.s();!(c=i.n()).done;){if(n[c.value]){a.push(r);break}}}catch(s){i.e(s)}finally{i.f()}}else n[this.data[r][t]]&&a.push(r);return a}},{key:"findIndices",value:function(e){for(var t=[],n=0;n<this.data.length;n++)this.deleted[n]||e(this.data[n])&&t.push(n);return t}},{key:"count",value:function(e,t){for(var n,a={},r=0;r<this.data.length;r++){if(t){if(r>=t.length)break;n=t[r]}else n=r;if(!this.deleted[n]){var c=this.data[n][e];Array.isArray(c)||(c=[c]);var i,s=Object(p.a)(c);try{for(s.s();!(i=s.n()).done;){var o=i.value;""!==o&&(a[o]||(a[o]=0),a[o]++)}}catch(u){s.e(u)}finally{s.f()}}}return a}},{key:"N",value:function(e){for(var t,n=0,a=0;a<this.data.length;a++){if(e){if(a>=e.length)break;t=e[a]}else t=a;this.deleted[t]||n++}return n}},{key:"listData",value:function(e,t){for(var n,a=[],r=0;r<this.data.length&&a.length!==e;r++){if(t){if(r>=t.length)break;n=t[r]}else n=r;this.deleted[n]||a.push(this.data[n])}return a}}]),e}();var Fe=function(){var e=Object(f.a)(j.a.mark((function e(t,n,a){var r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.getData(t,n);case 3:r=e.sent,c=new Ue(t,r,a),a(c),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),a(null);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n,a){return e.apply(this,arguments)}}(),Re=function(e){var t=e.dataName,n=e.searchOn,r=e.columns,c=e.VisComponent,i=e.calcStatistics,s=function(e,t){var n=Object(a.useState)(null),r=Object(O.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){Fe(e,t,i)}),[e,t]),c}(t),o=Object(a.useState)([]),u=Object(O.a)(o,2),l=u[0],h=u[1],b=Object(a.useState)(null),j=Object(O.a)(b,2),f=j[0],p=j[1],m=Object(a.useState)(null),g=Object(O.a)(m,2),x=g[0],v=g[1],y=Object(a.useState)(null),w=Object(O.a)(y,2),k=w[0],S=w[1];return Object(a.useEffect)((function(){S(We([x,f]))}),[x,f]),Object(a.useEffect)((function(){h(i(s,k))}),[s,k,i]),Object(d.jsx)(Se,{background:A,color:"#000000b0",children:Object(d.jsxs)(D.a,{stackable:!0,style:{height:"100vh"},children:[Object(d.jsxs)(D.a.Row,{style:{minHeight:"600px"},children:[Object(d.jsxs)(D.a.Column,{width:4,children:[Object(d.jsx)(Je,{}),Object(d.jsxs)($.a,{style:{margin:"50px",marginTop:"100px",padding:"20px"},children:[Object(d.jsx)("div",{style:{marginBottom:"1em"},children:Object(d.jsx)(qe,{dashData:s,searchOn:n,setSelection:v})}),Object(d.jsx)(Ve,{statistics:l})]})]}),Object(d.jsx)(D.a.Column,{width:12,children:Object(d.jsx)(c,{dashData:s,inSelection:x,setOutSelection:p})})]}),Object(d.jsx)(D.a.Row,{style:{minHeight:"500px",maxHeight:"50vh",width:"100%"},children:Object(d.jsx)(Me,{dashData:s,columns:r,selection:k})})]})})},Ve=function(e){var t=e.statistics;return Object(d.jsxs)($.a,{style:{height:"98%",padding:"20px",background:"#55555587",borderRadius:"10px"},children:[Object(d.jsx)(I.a,{as:"h1",align:"center",style:{color:"white",padding:"0",margin:"0"},children:"Statistics"}),Object(d.jsx)(ke.a.Group,{children:t.map((function(e){return Object(d.jsx)(ke.a,{children:Object(d.jsxs)(ke.a.Content,{children:[Object(d.jsx)(ke.a.Header,{style:{color:"white"},children:e.label}),Object(d.jsx)(ke.a.Description,{style:{color:"white"},children:e.value})]})},e.label)}))})]})},Je=function(){var e=Object(o.g)();return Object(d.jsxs)(z.a,{style:{position:"absolute",left:"0",background:"#00000000",color:"white",border:"1px solid white",marginLeft:"20px",marginTop:"20px"},onClick:function(){return e.push("/datasquare")},children:[Object(d.jsx)(H.a,{name:"backward"}),"Go back"]})},Pe=r.a.memo(Re),$e=n(316),Xe=Object($e.a)({spec:{$schema:"https://vega.github.io/schema/vega/v5.json",width:1e3,height:500,padding:20,autosize:"none",data:[{name:"tree",transform:[{type:"filter",expr:"selectedCategory != '' ? datum.type != 'group' || selectedCategory == datum.category : datum.type != 'group'"},{type:"window",groupby:["type"],ops:["count"]},{type:"filter",expr:"datum.type != 'group' || datum.count < 200"},{type:"stratify",key:"id",parentKey:"parent"},{type:"formula",as:"scaledsize",expr:"datum.category === selectedCategory && datum.type === 'group' ?  (datum.size * (0.8/(datum.categorySize))) : datum.size"},{type:"formula",as:"scaledsize",expr:"pow(datum.scaledsize*1000, 0.8)"},{type:"pack",field:"scaledsize",padding:4,as:["x","y","r"],size:[{signal:"width"},{signal:"height*2"}]},{type:"formula",as:"y",expr:"datum.y / 2"},{type:"formula",as:"width",expr:"datum.r"},{type:"formula",as:"height",expr:"datum.r / 2"},{type:"filter",expr:"datum.type != 'root'"}]}],signals:[{name:"selectedCategory",value:"",on:[{events:"click",update:"datum && datum.type == 'category' ? datum.category : selectedCategory",force:!1},{events:"click",update:"!datum || datum.type == 'root' ? '' : selectedCategory",force:!1}]},{name:"selectedDatum",value:null,on:[{events:"click",update:"datum && datum.type == 'group' && (isValid(selectedDatum) ? selectedDatum.id !== datum.id : true) ? datum : ''",force:!1}]}],scales:[{name:"color",type:"ordinal",domain:{data:"tree",field:"category"},range:{scheme:"category20"}}],marks:[{type:"path",from:{data:"tree"},encode:{enter:{path:{value:"M-1 0 A1 1 0 1 1 -1 0.01 z"},tooltip:{signal:"datum.name"}},update:{xc:{field:"x"},yc:{field:"y"},scaleX:{signal:"datum.width"},scaleY:{signal:"datum.height"},stroke:{value:"white"},strokeWidth:[{value:.8}],fill:[{test:"datum.type === 'category' && datum.category === selectedCategory",value:"transparent"},{test:"isValid(selectedDatum) && selectedDatum.id === datum.id",value:"white"},{scale:"color",field:"category"}]},hover:{stroke:{value:"white"},strokeWidth:[{test:"datum.type == 'category'",value:5},{value:2}]}}},{type:"image",name:"icon",from:{data:"tree"},encode:{enter:{url:{signal:"datum.count > 15 ? null : datum.icon"},tooltip:{signal:"datum.name"}},update:{xc:{field:"x"},yc:{field:"y"},width:{signal:"min(datum.width,32)"},height:{signal:"min(datum.height,32)"}},hover:{stroke:{value:"red"},strokeWidth:{value:2}}}},{type:"text",name:"label",from:{data:"tree"},encode:{enter:{tooltip:{signal:"datum.name"}},update:{text:{signal:"(datum.type === 'category' && (selectedCategory !== datum.category )) || (datum.type === 'group' && (datum.count > 15 || !datum.icon)) ? datum.label : null"},xc:{field:"x"},yc:{field:"y"},fontSize:{signal:"max(10,(datum.width/10)*(10/length(datum.name)))"},ellipsis:{value:"-"},align:{value:"center"},limit:{signal:"datum.width*1.8"},baseline:{value:"middle"},fill:{signal:"selectedCategory === datum.category && datum.type === 'category' ? '#00000096' : 'black'"}}}}]}}),Ke=n(227),Qe=function(e){var t=e.dashData,n=e.group,r=e.inSelection,c=e.setOutSelection,i=Object(a.useState)({tree:[]}),s=Object(O.a)(i,2),o=s[0],u=s[1],l=Object(a.useState)(null),h=Object(O.a)(l,2),b=h[0],m=h[1],g=Object(a.useState)([]),v=Object(O.a)(g,2),y=v[0],w=v[1],k=function(e,t){var n=Object(a.useState)([]),r=Object(O.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(null),o=Object(O.a)(s,2),u=o[0],l=o[1];return Object(a.useEffect)((function(){if(null===e||void 0===e?void 0:e.data){var n,a={},r=Object(p.a)(e.data);try{for(r.s();!(n=r.n()).done;){var c=n.value;(null===c||void 0===c?void 0:c[t])&&!a[c[t]]&&(a[c[t]]=!0)}}catch(i){r.e(i)}finally{r.f()}l(Object.keys(a))}}),[null===e||void 0===e?void 0:e.data,t]),Object(a.useEffect)((function(){u&&0!==u.length&&function(){var e=Object(f.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(u);case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[u]),c}(t,n),S=Object(a.useState)(!1),C=Object(O.a)(S,2),D=C[0],T=C[1];Object(a.useEffect)((function(){u(Ze(t,n,r,k)),c(null)}),[t,n,k,r,c,T]);var I=function(){var e=Object(f.a)(j.a.mark((function e(a){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.searchValues([a.name],n);case 2:r=e.sent,c(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(f.a)(j.a.mark((function e(){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.searchValues([b.name],n);case 2:a=e.sent,console.log(a),w(a),m(null);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G={selectedDatum:function(e,t){console.log(t),t?(I(t),m(t)):(c(null),m(null))},selectedCategory:function(e,t){return console.log(t)}},_={zIndex:1,position:"absolute",left:b?b.x:0,top:b?b.y:0};return console.log(o),Object(d.jsxs)("div",{style:{position:"relative"},children:[Object(d.jsx)(W.a,{active:D,children:Object(d.jsx)(U.a,{})}),Object(d.jsx)(Xe,{data:o,signalListeners:G,actions:!1,renderer:"svg"}),b&&Object(d.jsx)("div",{style:_,children:Object(d.jsxs)(q.a,{children:[Object(d.jsxs)(q.a.Content,{children:[b.icon&&Object(d.jsx)(Ke.a,{floated:"left",size:"mini",src:b.icon}),Object(d.jsx)(z.a,{basic:!0,floated:"right",size:"mini",icon:"close",onClick:function(){return m(null)}}),Object(d.jsx)(q.a.Header,{children:b.name}),Object(d.jsx)(q.a.Meta,{children:"".concat(b.visits," visits")}),Object(d.jsxs)(q.a.Description,{children:[Object(d.jsx)("p",{children:b.title&&b.title}),Object(d.jsxs)("p",{children:["Category: ",b.category?b.category:"unknown"]})]})]}),Object(d.jsx)(q.a.Content,{extra:!0,children:Object(d.jsx)("div",{className:"ui two buttons",children:Object(d.jsx)(z.a,{basic:!0,color:"red",onClick:A,children:"Delete"})})})]})}),Object(d.jsx)(Ae,{dashData:t,deleteIds:y,setDeleteIds:w})]})},Ze=function(e,t,n,a){var r=e.count(t,n);(r=Object.keys(r).map((function(e){return{name:e,count:r[e]}}))).sort((function(e,t){return t.count-e.count}));var c,i=[],s={},o={name:"root",type:"root",id:0,size:0},u=1,l=Object(p.a)(r);try{for(l.s();!(c=l.n()).done;){var d,h,b=c.value;o.size+=b.count;var j=(null===a||void 0===a||null===(d=a[b.name])||void 0===d?void 0:d.category)||b.name.split(".").slice(-1)[0]||"other",f=(null===a||void 0===a||null===(h=a[b.name])||void 0===h?void 0:h.icon)?a[b.name].icon:"https://icons.duckduckgo.com/ip3/".concat(b.name,".ico");s[j]||(s[j]={id:u++,name:j,type:"category",label:j,size:0,parent:0,category:j}),s[j].size+=b.count,i.push({type:"group",name:b.name,label:b.name.replace("www.",""),parent:s[j].id,size:b.count,visits:b.count,category:j,icon:f})}}catch(O){l.e(O)}finally{l.f()}for(var m=0,g=i;m<g.length;m++){g[m].id=u++}return i=i.map((function(e,t){return Object(_.a)(Object(_.a)({},e),{},{size:e.size/o.size,categorySize:s[e.category].size/o.size})})),s=Object.values(s).map((function(e,t){return Object(_.a)(Object(_.a)({},e),{},{size:e.size/o.size})})),o.size=1,{tree:[o].concat(Object(ne.a)(s),Object(ne.a)(i))}},et=r.a.memo(Qe),tt="domain",nt=["url","title"],at=["date","title","url"];var rt=function(e){var t=e.dashData,n=e.inSelection,a=e.setOutSelection;return t?Object(d.jsx)("div",{style:{width:"20vw",height:"vh"},children:Object(d.jsx)(et,{dashData:t,group:tt,inSelection:n,setOutSelection:a})}):null},ct=function(e,t){if(!e)return[];for(var n=e.count(tt,t),a={"Total visits":0,"Most visited":["none",0],"Unique websites":0},r=0,c=Object.keys(n);r<c.length;r++){var i=c[r];a["Total visits"]+=n[i],a["Unique websites"]++,n[i]>a["Most visited"][1]&&(a["Most visited"]="".concat(i," (").concat(n[i],")"))}return Object.keys(a).map((function(e){return{label:e,value:a[e]}}))},it="channel",st=["channel","title"],ot=["channel","title","date"];var ut=function(e){var t=e.dashData,n=e.inSelection,a=e.setOutSelection;return t?Object(d.jsx)("div",{style:{width:"20vw",height:"vh"},children:Object(d.jsx)(et,{dashData:t,field:it,inSelection:n,setOutSelection:a})}):null},lt=function(e,t){if(!e)return[];for(var n=e.count(it,t),a={"Total visits":0,"Most visited":["none",0],"Unique websites":0},r=0,c=Object.keys(n);r<c.length;r++){var i=c[r];a["Total visits"]+=n[i],a["Unique websites"]++,n[i]>a["Most visited"][1]&&(a["Most visited"]=[i,n[i]])}return Object.keys(a).map((function(e){return{label:e,value:a[e]}}))},dt=Object($e.a)({spec:{$schema:"https://vega.github.io/schema/vega/v5.json",description:"A word cloud visualization depicting Vega research paper abstracts.",width:1e3,height:500,padding:50,data:[{name:"table",transform:[{type:"window",groupby:["type"],ops:["count"]},{type:"filter",expr:"datum.count < 100"}]}],scales:[{name:"color",type:"ordinal",domain:{data:"table",field:"text"},range:["#d5a928","#652c90","#939597"]}],signals:[{name:"selectedWord",value:"",on:[{events:"click",update:"!datum || datum.text === selectedWord ? '' : datum.text",force:!1}]}],marks:[{type:"text",from:{data:"table"},encode:{enter:{text:{field:"text"},align:{value:"center"},baseline:{value:"alphabetic"}},update:{fill:[{test:"selectedWord === datum.text",value:"white"},{scale:"color",field:"text"}],fillOpacity:{value:1}},hover:{fillOpacity:[{test:"selectedWord === datum.text",value:1},{value:.5}]}},transform:[{type:"wordcloud",size:[900,500],text:{field:"text"},rotate:{field:"datum.angle"},font:"Helvetica Neue, Arial",fontSize:{field:"datum.count"},fontWeight:{field:"datum.weight"},fontSizeRange:[12,56],padding:2}]}]}}),ht=function(e){var t=e.dashData,n=e.group,r=e.inSelection,c=e.setOutSelection,i=Object(a.useState)({tree:[]}),s=Object(O.a)(i,2),o=s[0],u=s[1],l=Object(a.useState)([]),h=Object(O.a)(l,2),b=h[0],p=h[1],m=Object(a.useState)(!1),g=Object(O.a)(m,2),x=g[0],v=g[1];Object(a.useEffect)((function(){u(bt(t,n,r)),c(null)}),[t,n,r,c,v]);var y=function(){var e=Object(f.a)(j.a.mark((function e(a){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.searchValues([a],n);case 2:r=e.sent,c(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w={selectedWord:function(e,t){t?y(t):c(null)}};return Object(d.jsxs)("div",{style:{position:"relative"},children:[Object(d.jsx)(W.a,{active:x,children:Object(d.jsx)(U.a,{})}),Object(d.jsx)(dt,{data:o,signalListeners:w,actions:!1,renderer:"svg"}),Object(d.jsx)(Ae,{dashData:t,deleteIds:b,setDeleteIds:p})]})},bt=function(e,t,n,a){var r=e.count(t,n);return(r=Object.keys(r).map((function(e){return{text:e,count:r[e],angle:[-45,0,45][~~(3*Math.random())],weight:300}}))).sort((function(e,t){return t.count-e.count})),console.log(r),{table:r}},jt=r.a.memo(ht),ft="word",pt=["word"],mt=["query","date"];var gt=function(e){var t=e.dashData,n=e.inSelection,a=e.setOutSelection;return t?Object(d.jsx)("div",{style:{width:"20vw",height:"vh"},children:Object(d.jsx)(jt,{dashData:t,group:ft,inSelection:n,setOutSelection:a})}):null},Ot=function(e,t){if(!e)return[];for(var n=e.count(ft,t),a={"Total visits":0,"Most visited":["none",0],"Unique websites":0},r=0,c=Object.keys(n);r<c.length;r++){var i=c[r];a["Total visits"]+=n[i],a["Unique websites"]++,n[i]>a["Most visited"][1]&&(a["Most visited"]=[i,n[i]])}return Object.keys(a).map((function(e){return{label:e,value:a[e]}}))},xt=[{label:"Data square",path:"/datasquare",Component:we},{label:"Browsing History",path:"/browsing",Component:function(){return Object(d.jsx)(Pe,{dataName:"Browsing",searchOn:nt,columns:at,VisComponent:rt,calcStatistics:ct})}},{label:"Search",path:"/search",Component:function(){return Object(d.jsx)(Pe,{dataName:"Search",searchOn:pt,columns:mt,VisComponent:gt,calcStatistics:Ot})}},{label:"Youtube",path:"/youtube",Component:function(){return Object(d.jsx)(Pe,{dataName:"Youtube",searchOn:st,columns:ot,VisComponent:ut,calcStatistics:lt})}}],vt=function(){var e;return Object(d.jsx)("div",{style:{background:"#0C1D35",height:"100%"},children:Object(d.jsx)(s.a,{basename:"/DigitalFootprintsLab",children:Object(d.jsx)(h,{items:xt,children:Object(d.jsxs)(o.d,{children:[Object(d.jsx)(o.b,{exact:!0,path:"/",render:function(){return Object(d.jsx)(G,{items:xt})}}),(e=xt,e.map((function(e){return Object(d.jsx)(B,{path:e.path,Component:e.Component},e.path)})))]})})})})},yt=n(116),wt=n(224),kt=Object(yt.b)({dataStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATA_STATUS":return t.dataStatus;default:return e}}}),St=Object(yt.c)(kt,Object(yt.a)(wt.a));i.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(R.a,{store:St,children:Object(d.jsx)(vt,{})})}),document.querySelector("#root"))}},[[281,1,2]]]);
//# sourceMappingURL=main.67cd3984.chunk.js.map